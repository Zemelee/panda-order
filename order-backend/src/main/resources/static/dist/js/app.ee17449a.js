(function(){"use strict";var e={7013:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login-container"},[t("h3",{staticClass:"login-title"},[e._v("管理员登录")]),t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"0"}},[t("el-form-item",{attrs:{prop:"userName"}},[t("el-input",{attrs:{placeholder:"请输入账号","prefix-icon":"el-icon-user"},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{"show-password":"",placeholder:"请输入密码","prefix-icon":"el-icon-lock"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),t("el-form-item",[t("el-button",{staticClass:"login-button",attrs:{type:"primary"},on:{click:e.submit}},[e._v("登录")])],1)],1)],1)},n=[],i=a(8568),o=a(9560),l=a.n(o),s={name:"login",data(){return{form:{userName:"admin1",password:"123456"},rules:{userName:[{required:!0,message:"请输入账号",trigger:"blur"},{min:1,max:16,message:"长度应该在 1 到 16 个字符内",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:16,message:"长度应该在 6 到 16 个字符内",trigger:"blur"}]}}},methods:{submit(){this.$refs.form.validate((e=>{if(e){let e=l()(this.form.password);console.log("password:"+e),i.Z.get("/adminlogin",{params:{adminname:this.form.userName,adminpwd:e}}).then((e=>{200===e.data.status?(setTimeout((()=>{location.href="/state","admin1"==this.form.userName?localStorage.setItem("admin",1):localStorage.setItem("admin",2)}),1e3),localStorage.setItem("isAdmin",!0)):this.$message.error(e.data.message)})).catch((e=>{console.log("fail:",e)}))}}))}}},c=s,d=a(1001),u=(0,d.Z)(c,r,n,!1,null,"029303e6",null),m=u.exports},8568:function(e,t,a){var r=a(6154);const n=r.Z.create({baseURL:"/api/"});t.Z=n},506:function(e,t,a){var r=a(144),n=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{display:"flex","flex-direction":"column",height:"100vh"},attrs:{id:"app"}},[t("el-container",{staticStyle:{flex:"1"}},[t("el-main",{staticStyle:{flex:"auto"}},[t("router-view")],1)],1),t("el-footer",{staticStyle:{"margin-top":"auto"}},[e._v("山野食物自清香，萝卜青菜丰收忙。")])],1)},i=[],o=function(){var e=this,t=e._self._c;return t("div",[t("el-menu",{staticClass:"el-menu-demo",attrs:{router:!0,"default-active":e.activeIndex,mode:"horizontal"}},[t("el-menu-item",{attrs:{index:"/state"}},[t("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:"/state"}},[e._v(" 管理菜品 ")])],1),e.admin?e._e():t("el-menu-item",{attrs:{index:"/AddDish"}},[t("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:"/AddDish"}},[e._v(" 菜品上新 ")])],1),t("el-menu-item",{attrs:{index:"/Record"}},[t("a",{staticStyle:{"text-decoration":"none"},attrs:{href:"/Record",target:""}},[e._v("订单记录")])]),t("el-menu-item",{attrs:{index:"/LoginLog"}},[t("a",{staticStyle:{"text-decoration":"none"},attrs:{href:"/LoginLog",target:""}},[e._v("登录日志")])]),t("el-submenu",{attrs:{index:"5"}},[t("template",{slot:"title"},[e._v("数据统计")]),t("el-menu-item",{attrs:{index:"/Salesinfo"}},[t("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:"/Salesinfo"}},[e._v(" 销售总额 ")])],1),t("el-menu-item",{attrs:{index:"/DaySales"}},[t("router-link",{staticStyle:{"text-decoration":"none"},attrs:{to:"/DaySales"}},[e._v(" 日销售量 ")])],1)],2),t("el-menu-item",{staticStyle:{float:"right"},attrs:{index:""}},[t("el-popover",{attrs:{placement:"top",width:"160"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[t("p",[e._v("你要退出嘛？亲")]),t("div",{staticStyle:{"text-align":"right",margin:"0"}},[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.visible=!1}}},[e._v("取消")]),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleAvatarClick}},[e._v("确定")])],1),t("el-button",{staticStyle:{background:"url('https://www.beihaiting.com/uploads/allimg/160409/10723-16040913310a24.jpg')","background-size":"cover",width:"50px",height:"50px","border-radius":"50%"},attrs:{slot:"reference"},slot:"reference"})],1)],1)],1)],1)},l=[],s=a(4720),c=a.n(s),d={components:{Menu:s.Menu,MenuItem:s.MenuItem,Submenu:s.Submenu},data(){return{activeIndex:"/state",visible:!1,adminStorage:0,admin:!0}},created(){this.$router.afterEach((e=>{this.activeIndex=e.path})),this.adminStorage=localStorage.getItem("admin"),"1"==this.adminStorage&&(this.admin=!1)},mounted(){this.setActiveIndex(),this.$router.afterEach(this.setActiveIndex)},methods:{handleClick(e){e.target.href===window.location.href&&(e.stopPropagation(),console.log("当前链接和当前页面一致，不需要进行跳转！"))},setActiveIndex(){this.activeIndex=this.$route.path},handleAvatarClick(){localStorage.removeItem("isAdmin"),window.location.href="/login",this.visible=!1}}},u=d,m=a(1001),p=(0,m.Z)(u,o,l,!1,null,null,null),h=p.exports,g={components:{Header:h}},f=g,b=(0,m.Z)(f,n,i,!1,null,null,null),v=b.exports,x=a(8345),y=a(7013),w=function(){var e=this,t=e._self._c;return t("div",[t("Header"),t("div",{staticClass:"search-container"},[t("el-input",{staticStyle:{width:"300px","margin-left":"10px","margin-right":"10px"},attrs:{type:"text",placeholder:"菜品搜索",maxlength:"10","show-word-limit":""},on:{input:e.filterData,clear:e.filterData},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}}),t("el-button",{attrs:{type:"primary"}},[e._v("搜索")])],1),e.paginatedData.length>0?t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.paginatedData}},[t("el-table-column",{attrs:{fixed:"",prop:"dish_id",label:"序号",width:"50"}}),t("el-table-column",{attrs:{label:"图片",width:"150"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("img",{staticStyle:{"max-width":"100%","max-height":"100%"},attrs:{src:e.row.picture_url,alt:"reference picture"}})]}}],null,!1,1854012434)}),t("el-table-column",{attrs:{prop:"dish_name",label:"菜品",width:"120"}}),t("el-table-column",{attrs:{label:"价格",width:"90"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v(" ￥"),t("span",{staticStyle:{"max-width":"100%","max-height":"100%"},domProps:{innerHTML:e._s(a.row.price)}})]}}],null,!1,586850309)}),t("el-table-column",{attrs:{label:"菜类",width:"90"},scopedSlots:e._u([{key:"default",fn:function(a){return[1===a.row.category?t("span",[t("el-tag",[e._v("荤菜")])],1):e._e(),2===a.row.category?t("span",[t("el-tag",[e._v("素菜")])],1):e._e(),3===a.row.category?t("span",[t("el-tag",[e._v("汤菜")])],1):e._e(),4===a.row.category?t("span",[t("el-tag",[e._v("主食")])],1):e._e()]}}],null,!1,1601570472)}),t("el-table-column",{attrs:{label:"上下架情况",width:"120"},scopedSlots:e._u([{key:"default",fn:function(a){return[1===a.row.state?t("span",[e._v("已下架")]):e._e(),2===a.row.state?t("span",[e._v("展示中")]):e._e()]}}],null,!1,1559340154)}),t("el-table-column",{attrs:{prop:"description",label:"详情",width:"100"}}),t("el-table-column",{attrs:{prop:"likes",label:"点赞数",width:"100"}}),t("el-table-column",{attrs:{fixed:"right",label:"菜品删除",width:"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.delDish(a.row)}}},[e._v(" 删除 ")])]}}],null,!1,893223054)}),t("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.editState(a.row)}}},[1===a.row.state?t("span",[e._v("去上架")]):t("span",[e._v("去下架")])])]}}],null,!1,3010095916)})],1):e._e(),t("el-pagination",{attrs:{"page-size":e.pageSize,total:e.alldish.length,layout:"prev, pager, next",mode:"background"},on:{"current-change":e.handlePageChange},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)},_=[],S=(a(9560),a(8568)),k={name:"state",data(){return{alldish:[],alldishCopy:[],pageSize:5,currentPage:1,text:""}},components:{Header:h},watch:{alldish(e){this.alldishCopy=[...e],this.currentPage=1}},computed:{paginatedData(){const e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;return this.alldishCopy.slice(e,t)}},methods:{detail(e){},editState(e){var t=1===e.state?2:1,a=this;S.Z.get("/updateDish",{params:{did:e.dish_id,state:t}}).then((r=>{var n=a.alldish.indexOf(e);if(console.log(n),-1!==n){const a={...e,state:t};this.$set(this.alldish,n,a)}})).catch((e=>{console.log("修改失败：",e)}))},delDish(e){const t=this;s.MessageBox.confirm(`确认删除菜品 ${e.dish_name} 吗？`,"删除",{type:"warning"}).then((()=>{S.Z.get("/deldish",{params:{did:e.dish_id}}).then((a=>{const r=t.alldish.indexOf(e);t.alldish.splice(r,1),(0,s.Message)({message:"删除成功",type:"success"})})).catch((e=>{console.log("删除失败：",e),(0,s.Message)({message:"删除失败，请稍后重试",type:"error"})}))})).catch((()=>{(0,s.Message)({message:"已取消删除",type:"info"})}))},handlePageChange(e){this.currentPage=e},filterData(){const e=this.text.trim().toLowerCase();this.alldishCopy=e?this.alldish.filter((t=>t.dish_name.toLowerCase().includes(e)||t.description.toLowerCase().includes(e))):[...this.alldish],this.currentPage=1}},beforeMount(){S.Z.get("/getalldish").then((e=>{console.log("菜品信息：",e),this.alldish=e.data,this.alldishCopy=[...e.data]})).catch((e=>{console.log("fail:",e)}))}},D=k,$=(0,m.Z)(D,w,_,!1,null,null,null),C=$.exports,F=function(){var e=this,t=e._self._c;return t("div",{staticClass:"add-dish-wrapper"},[t("Header"),t("div",{staticClass:"add-dish"},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"label-width":"100px",rules:e.rules}},[t("el-row",[t("el-col",{attrs:{xs:24,sm:12}},[t("el-form-item",{attrs:{label:"菜品名字",prop:"dishname"}},[t("el-input",{model:{value:e.ruleForm.dishname,callback:function(t){e.$set(e.ruleForm,"dishname",t)},expression:"ruleForm.dishname"}})],1)],1),t("el-col",{attrs:{xs:24,sm:12}},[t("el-form-item",{attrs:{label:"价格",prop:"price"}},[t("el-input",{model:{value:e.ruleForm.price,callback:function(t){e.$set(e.ruleForm,"price",e._n(t))},expression:"ruleForm.price"}})],1)],1),t("el-col",{attrs:{xs:24,sm:12}},[t("el-form-item",{attrs:{label:"种类",prop:"category"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.category,callback:function(t){e.$set(e.ruleForm,"category",t)},expression:"ruleForm.category"}},[t("el-option",{attrs:{label:"肉菜",value:"1"}}),t("el-option",{attrs:{label:"素菜",value:"2"}}),t("el-option",{attrs:{label:"汤",value:"3"}}),t("el-option",{attrs:{label:"饭",value:"4"}})],1)],1)],1),t("el-col",{attrs:{xs:24,sm:12}},[t("el-form-item",{attrs:{label:"状态",prop:"state"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.state,callback:function(t){e.$set(e.ruleForm,"state",t)},expression:"ruleForm.state"}},[t("el-option",{attrs:{label:"上架",value:"2"}}),t("el-option",{attrs:{label:"下架",value:"1"}})],1)],1)],1),t("el-col",{attrs:{xs:24}},[t("el-form-item",{attrs:{label:"简介",prop:"description"}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:8}},model:{value:e.ruleForm.description,callback:function(t){e.$set(e.ruleForm,"description",t)},expression:"ruleForm.description"}})],1)],1),t("el-col",{attrs:{xs:24}},[t("el-form-item",{attrs:{label:"图片",prop:"picurl"}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:1e3}},model:{value:e.ruleForm.picurl,callback:function(t){e.$set(e.ruleForm,"picurl",t)},expression:"ruleForm.picurl"}})],1)],1),t("el-col",{attrs:{xs:24}},[t("el-form-item",{attrs:{label:"详情",prop:"details"}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:8}},model:{value:e.ruleForm.details,callback:function(t){e.$set(e.ruleForm,"details",t)},expression:"ruleForm.details"}})],1)],1)],1),t("el-form-item",{staticClass:"button-group"},[t("el-button",{attrs:{type:"primary",disabled:!1},on:{click:e.submitForm}},[e._v("提交")]),t("el-button",{attrs:{type:"primary",disabled:!1},on:{click:e.resetForm}},[e._v("重置")]),t("el-button",{attrs:{type:"primary",disabled:!1},on:{click:e.Handclick}},[e._v("退出")])],1)],1)],1)],1)},P=[],I={name:"AddDish",data(){return{ruleForm:{dishname:"",price:"",category:"",description:"",state:"",picurl:"",details:""},rules:{dishname:[{required:!0,message:"请输入菜品名字",trigger:"blur"}],price:[{required:!0,message:"请输入价格",trigger:"blur"},{type:"number",message:"请输入数字"}],category:[{required:!0,message:"请选择种类",trigger:"change"}],description:[{required:!0,message:"请输入详情",trigger:"blur"}],state:[{required:!0,message:"请选择状态",trigger:"change"}]},isDisabled:!0}},components:{Header:h},methods:{resetForm(){this.$refs.ruleForm.resetFields(),this.isDisabled=!0},Handclick(){this.$confirm("退出到state页面, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{window.location.href="/state",this.$message({type:"success",message:"退出成功!"})})).catch((()=>{this.$message({type:"info",message:"取消退出"})}))},submitForm(){S.Z.get("/adddish",{params:{dishname:this.ruleForm.dishname,price:this.ruleForm.price,category:this.ruleForm.category,description:this.ruleForm.description,state:this.ruleForm.state,picurl:this.ruleForm.picurl,details:this.ruleForm.details}}),this.$alert("是否向菜单添加菜品","添加确定",{confirmButtonText:"确定",callback:e=>{this.$message({type:"success",message:"添加成功"})}}).then((e=>{console.log(this.ruleForm),console.log("success:",e)})).catch((e=>{console.log(this.ruleForm),console.log("err:",e)}))}}},z=I,Z=(0,m.Z)(z,F,P,!1,null,"a0480a36",null),L=Z.exports,T=function(){var e=this,t=e._self._c;return t("div",[t("Header"),e.paginatedData.length>0?t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.paginatedData,"default-sort":{prop:"date",order:"descending"}}},[t("el-table-column",{attrs:{fixed:"",prop:"user_id",label:"用户ID",sortable:"",width:"200"}}),t("el-table-column",{attrs:{fixed:"",prop:"order_time",label:"日期",sortable:"",width:"300"}}),t("el-table-column",{attrs:{prop:"dish_name",label:"菜品",width:"200"}}),t("el-table-column",{attrs:{prop:"price",label:"订单金额",width:"200"}}),t("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"middle"},on:{click:function(t){return e.handleClick(a.row)}}},[e._v("查看")]),t("el-button",{attrs:{type:"text",size:"middle"},on:{click:function(t){return e.handleDelete(a.row)}}},[e._v(" 删除 ")])]}}],null,!1,2721614793)})],1):e._e(),t("el-pagination",{attrs:{"page-size":e.pageSize,total:e.tableData.length,layout:"prev, pager, next",mode:"background"},on:{"current-change":e.handlePageChange},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)},N=[],A={name:"Record",data(){return{tableData:[],tableDataCopy:[],code:"123456",code1:"",pageSize:10,currentPage:1}},components:{Header:h},watch:{tableData(e){this.tableDataCopy=[...e],this.currentPage=1}},computed:{paginatedData(){const e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;return this.tableDataCopy.slice(e,t)}},methods:{handleClick(e){this.$alert(`菜品：${e.dish_name} ——金额：${e.price}——            日期：${e.order_time}`,{confirmButtonText:"确定",callback:e=>{this.$message({type:"info",message:`record: ${e}`})}})},handleDelete(e){this.$confirm("确定删除该记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{S.Z.delete(`/delrecord?ordertime=${e.order_time}`).then((t=>{console.log(t.data);const a=this.tableData.indexOf(e);-1!==a&&this.tableData.splice(a,1)})).catch((e=>{console.log(e)}))})).catch((()=>{}))},handlePageChange(e){this.currentPage=e}},created(){S.Z.get("/alldetail").then((e=>{console.log(e);let t=e.data.map((e=>(e.order_time=new Date(e.order_time).toLocaleString("zh-CN",{hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).replace(/\//g,"-"),e))).sort(((e,t)=>new Date(t.order_time)-new Date(e.order_time)));this.tableData=t,this.tableDataCopy=[...this.tableData]})).catch((e=>{console.log(e)}))}},O=A,H=(0,m.Z)(O,T,N,!1,null,null,null),M=H.exports,R=function(){var e=this,t=e._self._c;return t("div",{staticClass:"menu"},[t("el-menu",{staticClass:"el-menu-demo",attrs:{"background-color":"","default-active":e.activeIndex,mode:"horizontal"}},[t("el-menu-item",{attrs:{index:"1"}},[t("router-link",{attrs:{to:{path:"/home/index"}}},[t("el-menu-item",{attrs:{index:"1-1"}},[e._v("首页")])],1)],1),t("el-sub-menu",{attrs:{disabled:e.vendorNav,index:"0"},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("摊贩中心")]},proxy:!0}])},[t("router-link",{attrs:{to:{path:"/home/submit"}}},[t("el-menu-item",{attrs:{index:"2"}},[e._v("申请摊位")])],1)],1),t("el-sub-menu",{attrs:{disabled:e.managerNav,index:"3"},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("城管中心")]},proxy:!0}])},[t("router-link",{attrs:{to:{path:"/home/echarts"}}},[t("el-menu-item",{attrs:{index:"3-1"}},[e._v("摊圈信息")])],1),t("router-link",{attrs:{to:{path:"/home/announce"}}},[t("el-menu-item",{attrs:{index:"3-2"}},[e._v("发布公告")])],1),t("el-sub-menu",{attrs:{index:"3-3"},scopedSlots:e._u([{key:"title",fn:function(){return[e._v("审核")]},proxy:!0}])},[t("router-link",{attrs:{to:{path:"/home/check/apply"}}},[t("el-menu-item",{attrs:{index:"3-3-1"}},[e._v("审核申请")])],1),t("router-link",{attrs:{to:{path:"/home/check/complain"}}},[t("el-menu-item",{attrs:{index:"3-3-2"}},[e._v("查看反馈")])],1)],1)],1),t("router-link",{attrs:{to:{path:"/home/explain"}}},[t("el-menu-item",{attrs:{index:"4"}},[e._v("系统说明")])],1)],1)],1)},j=[],E={data(){return{menus:[],activeIndex:"1",tableData:[],vendorNav:!1,managerNav:!1,id:0}},mounted(){console.log(this.$route.name),"Explain"==this.$route.name?this.activeIndex="4":"申请"==this.$route.name?this.activeIndex="2":"发布公告"==this.$route.name?this.activeIndex="3-2":"发布栏"==this.$route.name&&(this.activeIndex="1"),this.menus=[...this.$router.options.routes],setTimeout((()=>{1==this.$store.state.identity?this.managerNav=!0:2==this.$store.state.identity?this.vendorNav=!0:0==this.$store.state.identity?(this.vendorNav=!1,this.managerNav=!1):-1==this.$store.state.identity&&(this.vendorNav=!0,this.managerNav=!0,this.$message.warning("游客用户"),console.log("this.$store.state.identity",this.$store.state.identity))}),1e3)},methods:{}},B=E,q=(0,m.Z)(B,R,j,!1,null,"1100c3b4",null),G=q.exports,W=function(){var e=this,t=e._self._c;return t("div",[t("Header"),e.paginatedData.length>0?t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.paginatedData,"default-sort":{prop:"date",order:"descending"}}},[t("el-table-column",{attrs:{prop:"loginId",label:"登录编号",width:"100"}}),t("el-table-column",{attrs:{prop:"account",label:"用户名",width:"100"}}),t("el-table-column",{attrs:{prop:"loginIp",label:"登录IP",width:"200"}}),t("el-table-column",{attrs:{prop:"loginTime",label:"登录时间",width:"200",sortable:""}})],1):e._e(),t("el-pagination",{attrs:{"page-size":e.pageSize,total:e.tableData.length,layout:"prev, pager, next",mode:"background"},on:{"current-change":e.handlePageChange},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)},U=[],J={name:"LoginLog",data(){return{tableData:[],tableDataCopy:[],code:"123456",code1:"",pageSize:10,currentPage:1}},components:{Header:h},watch:{tableData(e){this.tableDataCopy=[...e],this.currentPage=1}},computed:{paginatedData(){const e=(this.currentPage-1)*this.pageSize,t=e+this.pageSize;return this.tableDataCopy.slice(e,t)}},methods:{handlePageChange(e){this.currentPage=e}},created(){S.Z.get("/adminlogs",{params:{page:1,size:100}}).then((e=>{console.log(e);let t=e.data.map((e=>(e.loginTime=new Date(e.loginTime).toLocaleString("zh-CN",{hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).replace(/\//g,"-"),e))).sort(((e,t)=>new Date(t.loginTime)-new Date(e.loginTime)));this.tableData=t,this.tableDataCopy=[...this.tableData]})).catch((e=>{console.log(e)}))}},K=J,Q=(0,m.Z)(K,W,U,!1,null,null,null),V=Q.exports,X=function(){var e=this,t=e._self._c;return t("div",[t("Header"),t("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[t("h2",[e._v("总销售额为："+e._s(e.totalRevenue)+"元")])]),t("div",{style:{height:"400px",width:"100%"},attrs:{id:"bar-chart"}})],1)},Y=[],ee=a(1893),te={name:"Salesinfo",data(){return{tableData:[],totalRevenue:0}},components:{Header:h},mounted(){const e=ee.S1(document.getElementById("bar-chart"));window.addEventListener("resize",(()=>{e.resize()})),S.Z.get("/getalldish").then((t=>{const a=t.data.map((e=>{const t=e.sales,a=e.price,r=t*a;return{value:t,name:e.dish_name,price:a,revenue:r}}));this.totalRevenue=a.reduce(((e,t)=>e+t.revenue),0);const r={title:{text:"销售信息柱状图",left:"center",top:20,textStyle:{color:"#555",fontSize:18,fontWeight:"normal"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["销量","单价","销售额"],right:0,top:"bottom"},grid:[{left:"3%",right:"15%",top:"20%",bottom:"10%",containLabel:!0}],xAxis:[{type:"category",data:a.map((e=>e.name)),axisLabel:{interval:0,rotate:30},boundaryGap:!1,gridIndex:0}],yAxis:[{type:"value",name:"销量",boundaryGap:[0,.01],minInterval:1,splitLine:{show:!0},gridIndex:0,offset:30},{type:"value",name:"",boundaryGap:[0,.01],axisLabel:{formatter:"{value}"},gridIndex:0,offset:40},{type:"value",name:"销售额",boundaryGap:[0,.01],axisLabel:{formatter:"{value}"},gridIndex:0,offset:80}],series:[{name:"销量",type:"bar",barWidth:10,data:a.map((e=>e.value)),xAxisIndex:0,yAxisIndex:0,label:{show:!0,position:"top",formatter:"{c}"}},{name:"销售额",type:"bar",barWidth:10,data:a.map((e=>e.revenue)),xAxisIndex:0,yAxisIndex:2,label:{show:!0,position:"top",formatter:"{c}"}}]};e.setOption(r)})).catch((e=>{console.log(e)}))},methods:{}},ae=te,re=(0,m.Z)(ae,X,Y,!1,null,null,null),ne=re.exports,ie=function(){var e=this,t=e._self._c;return t("div",[t("Header"),e._m(0),t("div",{style:{height:"400px",width:"100%"},attrs:{id:"line-chart"}})],1)},oe=[function(){var e=this,t=e._self._c;return t("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[t("h2",[e._v("日销售额总览")])])}],le={name:"DaySales",components:{Header:h},data(){return{}},mounted(){const e=ee.S1(document.getElementById("line-chart"));window.addEventListener("resize",(()=>{e.resize()})),S.Z.get("/alldetail").then((t=>{const a=Date.now()-6048e6,r=t.data,n=r.reduce(((e,t)=>{const r=new Date(t.order_time).toLocaleDateString();return new Date(t.order_time).getTime()>a&&(e[r]=(e[r]||0)+t.price*t.amount),e}),{}),i=[];this.$nextTick((()=>{for(let e=6;e>=0;e--){const t=new Date(Date.now()-864e5*e).toLocaleDateString();i.push({name:t,value:n[t]||0})}const t={title:{text:"近7天日销售额"},tooltip:{},xAxis:{data:i.map((e=>e.name))},yAxis:{},series:[{name:"销售总额",type:"line",data:i.map((e=>e.value))}]};e.setOption(t)}))}))},methods:{}},se=le,ce=(0,m.Z)(se,ie,oe,!1,null,null,null),de=ce.exports;r["default"].use(x.ZP);const ue=[{path:"/",name:"login",component:y["default"]},{path:"/test",name:"test",component:G},{path:"/state",name:"state",component:C},{path:"/adddish",name:"adddish",component:L},{path:"/login",name:"login",component:function(){return Promise.resolve().then(a.bind(a,7013))}},{path:"/record",name:"record",component:M},{path:"/loginlog",name:"loginlog",component:V},{path:"/salesinfo",name:"salesinfo",component:ne},{path:"/daysales",name:"daysales",component:de}],me=new x.ZP({mode:"history",base:"/",routes:ue});me.beforeEach(((e,t,a)=>{const r=localStorage.getItem("isAdmin");r||"/login"==e.path?a():(alert("先登录！"),a("/login"))}));var pe=me,he=a(629);r["default"].use(he.ZP);var ge=new he.ZP.Store({state:{},getters:{},mutations:{},actions:{},modules:{}});r["default"].use(c()),r["default"].config.productionTip=!1,new r["default"]({router:pe,store:ge,ElementUI:c(),render:function(e){return e(v)}}).$mount("#app")}},t={};function a(r){var n=t[r];if(void 0!==n)return n.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}a.m=e,function(){a.amdO={}}(),function(){var e=[];a.O=function(t,r,n,i){if(!r){var o=1/0;for(d=0;d<e.length;d++){r=e[d][0],n=e[d][1],i=e[d][2];for(var l=!0,s=0;s<r.length;s++)(!1&i||o>=i)&&Object.keys(a.O).every((function(e){return a.O[e](r[s])}))?r.splice(s--,1):(l=!1,i<o&&(o=i));if(l){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[r,n,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,i,o=r[0],l=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(n in l)a.o(l,n)&&(a.m[n]=l[n]);if(s)var d=s(a)}for(t&&t(r);c<o.length;c++)i=o[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(d)},r=self["webpackChunkmanage"]=self["webpackChunkmanage"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998],(function(){return a(506)}));r=a.O(r)})();
//# sourceMappingURL=app.ee17449a.js.map